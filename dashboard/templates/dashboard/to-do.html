{% extends 'dashboard/base.html' %}
{% load staticfiles %}
{% load app_filters %}

{% block content %}
<!-- Overlay Div -->
<div id="overlay" class="transparent"></div>
{% include "dashboard/theme_setting.html" %}

<div id="wrapper" class="preload">

	{% include "dashboard/sidebar.html" %}

  <script src="{% static 'dashboard/js/sidebarSetActive.js' %}"></script>


	<div id="main-container">
		{% include "dashboard/top_nav_bar.html" %}

		{% include "dashboard/grey_container.html" %}

		<div class="padding-md">
			<div class="panel panel-default table-responsive">
				<div class="panel-heading">
					Assigned Tests
					<span class="label label-info pull-right">{{uncompleted_tests|length}} Items</span>
				</div>
				<div class="panel-body">
					{% if not request.user.myuser.is_a_player %}
					<div class="row">
						<div class="col-md-4 col-sm-4">
							<select name="units" class="unit-form" id="group-form" onchange="changeGroup(this)">
								<optgroup label="Groups"> <!-- Use this to create sub-groups -->
									<!-- REPLACE THE FOLLOWING WITH A DJANGO FOR LOOP THROUGH GROUPS -->
									{% for group in groups %}
										<option value="{{group.id}}">&nbsp;&nbsp;&nbsp;{{group}}</option>
									{% endfor %}
								</optgroup>
							</select>
						</div><!-- /.col -->
					</div><!-- /.row -->
					{% endif %}
				</div>
				<table class="table table-striped" id="responsiveTable">
					<thead>
						<tr>
							<th>
								<label class="label-checkbox">
									<input type="checkbox" id="chk-all">
									<span class="custom-checkbox"></span>
								</label>
							</th>
							<th>Name</th>
							<th>Type</th>
							{% if not request.user.myuser.is_a_player %}
							<th>Assigned To</th>
							{% endif %}
							<th>Due</th>
							<th>In Progress</th>
							<th>Added By</th>
							<th></th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						{% for test in uncompleted_tests %}
						<tr id="test-{{test.id}}">
							<td>
								<label class="label-checkbox">
									<input type="checkbox" class="chk-row">
									<span class="custom-checkbox"></span>
								</label>
							</td>
							<td>
								{{test.name}}
							</td>
							<td>{{test}}</td>
							{% if not request.user.myuser.is_a_player %}
							<td>
								{{test.player}}
							</td>
							{% endif %}
							<td>{% due_date_default test.deadline %}</td>
							<td>
								{% if test.in_progress%}
									Yes
								{% else %}
									No
								{% endif %}
							</td>
							<td>{{test.coach_who_created.get_full_name}}</td>
							{% if request.user.myuser.is_a_player %}
								<td><a href="/quiz/{{test.type_of_test}}/{{test.id}}"><span class="label label-success">Start Quiz</span></a></td>
							{% else %}
							<td><a href="{% url 'edit_test' test.id %}"><span class="label label-success">Edit Quiz</span></a></td>
							<td><a href="{% url 'test_analytics' test.id %}"><span class="label label-success">Analytics</span></a></td>

							{% endif %}
						</tr>
						{% endfor %}

					</tbody>
				</table>
			</div><!-- /panel -->
			<div class="row dash-row">



				<div class="loading-overlay">
					<i class="loading-icon fa fa-refresh fa-spin fa-lg"></i>
				</div>
			</div><!-- /panel -->





			<a href="" id="scroll-to-top" class="hidden-print"><i class="fa fa-chevron-up"></i></a>
			{% endblock %}
