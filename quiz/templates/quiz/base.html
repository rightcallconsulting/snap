{% load staticfiles %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <style> body {padding: 0; margin: 0;} </style>
  <meta charset="utf-8">
  <title>Right Call Consulting</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  <!-- Bootstrap core CSS -->
  <link href="{% static 'dashboard/css/bootstrap/bootstrap.min.css' %}" rel="stylesheet">

  <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" type="text/css">-->
  <!-- Font Awesome -->

  <!-- Pace -->
  <link href="{% static 'dashboard/css/pace.css' %}" rel="stylesheet">
  <link href="{% static 'dashboard/css/custom-quiz.css' %}" rel="stylesheet">

  <!-- Color box -->
  <link href="{% static 'dashboard/css/colorbox/colorbox.css' %}" rel="stylesheet">

  <!-- Morris -->
  <link href="{% static 'dashboard/css/morris.css' %}" rel="stylesheet"/>

  <!-- Endless -->
  <link href="{% static 'dashboard/css/endless.min.css' %}" rel="stylesheet">
  <link href="{% static 'dashboard/css/endless-skin.css' %}" rel="stylesheet">
  <link rel="shortcut icon" href="{%  static 'dashboard/images/favicon.ico' %}">
</head>

<body class="">
  {% include "dashboard/theme_setting.html" %}
  <div id="wrapper" class="preload">
    {% include "dashboard/sidebar.html" %}
    <div class="small-sidebar-container" id="main-container">
      {% include "dashboard/top_nav_bar.html" %}
      {% include "dashboard/grey_container.html" %}
      <div class="quiz">
        <div class="main-content-area display-box" id="display-box">
          <div class="dash-header text-center" id="header-box">
            <span>
              <h4 id="play-name">
                {% block header %}
                {% endblock %}
              </h4>
            </span>
          </div>
          <div id="quiz-box">
            {% if not has_plays %}
            <!--[DISPLAY THAT NO PLAYS IN THIS TEST YET]-->
            {% endif %}

          </div>
          <div class="holds-play-buttons">
            {% block buttons %}
            <div class="holds-play-buttons">
              <table class="button-table"><tr>
                <td><button id="play-button" name="button">{% include "quiz/play_button.html" %}</button></td>
                <td><button id="pause-button" name="button">{% include "quiz/pause_button.html" %}</button></td>
                <td><button id="check-button" name="button">{% include "quiz/check_button.html" %}</button></td>
                <td><button id="restart-button" name="button">{% include "quiz/refresh_button.html" %}</button></td>
                <td><button id="clear-button" name="button">{% include "quiz/clear_button.html" %}</button></td>
                <td><button id="next-play-button" name="button">{% include "quiz/next_play_button.html" %}</button></td>
                <td><button id="question-button" name="button">{% include "quiz/question_button.html" %}</button></td>
                <td><button id="zoom-in-button" name="button">{% include "quiz/zoom_in_button.html" %}</button></td>
                <td><button id="zoom-out-button" name="button">{% include "quiz/zoom_out_button.html" %}</button></td>
                <td><button id="full-screen-button" name="button">{% include "quiz/full_screen_button.html" %}</button></td>
              </tr></table>
            </div>
            {% endblock %}
          </div>

        </div>

        {% block sidebar %}
        <div class="secondary-content-area quiz-sidebar" id="quiz-sidebar">
          <div class="dash-header text-center">
            <span><h4 id="play-image-header">{{page_header}}</h4></span>
          </div>
          <table class="quiz-sidebar-table">
            <tr class="top"><td>
              <span><h3 id="progress">Q1/Q{{num_plays}}</h3></span>
            </td></tr>
            <tr class="middle"><td id="multiple-choice-answer-cell" class="hidden">
              {% block multipleChoiceAnswers %}
              <div id="correct-answer-index">0</div>
              <table class="multiple-choice-answers">
                <tr><td id="mc-answer-1"><button id="mc-button-1" class="disabled">ANSWER 1</button></td></tr>
                <tr><td id="mc-answer-2"><button id="mc-button-2" class="disabled">ANSWER 2</button></td></tr>
                <tr><td id="mc-answer-3"><button id="mc-button-3" class="disabled">ANSWER 3</button></td></tr>
              </table>
              <button id="skip-button">
                <span>Skip <h3 id="skip-button-skips"></h3></span>
              </button>
              <script type="text/javascript">

              var checkMultipleChoiceAnswer = function(index){
                var answerIndex = int(document.getElementById('correct-answer-index').innerHTML);
                var isCorrect = (index === answerIndex);
                test.registerAnswer(isCorrect);
                if(isCorrect){
                  currentPlayerTested = null;
                  multipleChoiceAnswers = [];
                  clearMultipleChoiceAnswers();

                }else{
                  //start feedback screen start time
                  var answer = document.getElementById("mc-button-"+answerIndex);
                  answer.classList.add('highlighted');
                  test.feedbackScreenStartTime = millis();
                  scene = false;
                }
              };

              var clearMultipleChoiceAnswers = function(){
                for(var i = 1; i <= 3; i++){
                  var answer = document.getElementById("mc-button-"+i);
                  if(answer && answer.classList.contains('clicked')){
                    answer.classList.remove('clicked')
                  }
                  if(answer && answer.classList.contains('highlighted')){
                    answer.classList.remove('highlighted')
                  }
                }
              };
              var clickButton = function(index){
                if(test.feedbackScreenStartTime){
                  return false;
                }
                if(test.showDemo && demoDoubleClick){
                  exitDemoScreen();
                  return false;
                }
                var answer = document.getElementById("mc-button-"+index);
                if(test && !test.over && answer && answer.classList.contains('clicked')){
                  if(test.showDemo){
                    clearMultipleChoiceAnswers();
                    demoDoubleClick = true;
                    return false;
                  }else{
                    checkMultipleChoiceAnswer(index);
                  }

                }else if(test && !test.over && answer && !answer.classList.contains('disabled')){
                  clearMultipleChoiceAnswers();
                  answer.classList.add('clicked')
                }
                return true;
              }

              document.getElementById("mc-button-1").onclick = function(e){
                if(!clickButton(1)){
                  debugger;
                  e.preventDefault();
                }else{
                  debugger;
                }
              };

              document.getElementById("mc-button-2").onclick = function(e){
                if(!clickButton(2)){
                  debugger;
                  e.preventDefault();
                }else{
                  debugger;
                }
              };

              document.getElementById("mc-button-3").onclick = function(e){
                if(!clickButton(3)){
                  debugger;
                  e.preventDefault();
                }else{
                  debugger;
                }
              };

              document.getElementById("skip-button").onclick = function(){
                if(test && test.showDemo){
                  exitDemoScreen();
                  return false;
                }
                if(test && !test.over && test.feedbackScreenStartTime === 0){
                  currentPlayerTested = null;
                  test.skipQuestion();
                  multipleChoiceAnswers = [];
                }
              };


              </script>


              {% endblock %}
            </td></tr>
            <tr class="bottom"><td>

              <span><h3 id="feedback-message"></h3></span>

            </td></tr>
          </table>
        </div>
        {% endblock %}

        {% block scoreboard %}
        <div class="secondary-content-area choose-offensive-formation-box" id="quiz-scoreboard">
          <div class="dash-header text-center">
            <span><h4>Results</h4></span>
          </div>
          <table class="scoreboard-table">
            <tr><td>
              <div class="scoreboard-header">
                CORRECT
              </div>
              <h3 id="correct"></h3>
            </td></tr>
            <tr><td>
              <div class="scoreboard-header">
                INCORRECT
              </div>
              <h3 id="incorrect-guesses"></h3>
            </td></tr>
          <tr><td>
            <div class="scoreboard-header">
              SKIPPED
            </div>
            <h3 id="skips"></h3>
        </td></tr>
        </table>
        </div>
        {% endblock %}


      </div>
    </div>

  </div>
  <div id="test-id" data-test-id="{{test.id}}" style="display: none;"></div>
  <div id="team-id" data-team-id="{{team.id}}" style="display: none;"></div>
  <div id="player-id" data-player-id="{{player.id}}" style="display: none;"></div>

</body>
<script src="{% static 'dashboard/js/jquery-1.10.2.min.js' %}"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.20/p5.js"></script>
<!--<script language="javascript" src="../addons/p5.dom.js"></script>-->
<!--<script language="javascript" src="../addons/p5.sound.js"></script>-->
<script language="javascript" type="text/javascript" src="{% static 'quiz/js.cookie.js' %}"></script>
<!--<script language="javascript" type="text/javascript" src="{% static 'quiz/buttons.js' %}"></script>-->

<script src="{% static 'dashboard/js/sidebarSetActive.js' %}"></script>

{% comment %}{% if has_plays %}{% endcomment %}
{% block quiz_type %}
{% endblock %}
{% comment %}{% endif %}{% endcomment %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/ajaxMethods.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/player.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/playerGroup.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/defensivePlayers.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/play.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/runPlay.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/test.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/button.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/user.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/scoreboard.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/defensivePlay.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/formation.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/field.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/coverageZone.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/formationTest.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/playTest.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/routeTest.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/multipleChoiceAnswer.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/node.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/summary.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/team.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/cadence.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/cadenceTest.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/sampleFormations.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/offenseCheck.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/blockingAssignment.js' %}"></script>
<script language="javascript" type="text/javascript" src="{% static 'quiz/models/runAssignment.js' %}"></script>
<script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
</html>
